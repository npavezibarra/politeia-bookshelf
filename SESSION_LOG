Sessions:

December 31st, 11:43 UTC
1. Created SESSION_LOG to begin tracking plugin work sessions.
2. Documented initial log structure for future updates.

December 31st, 2025, 14:09 UTC
1. Added AGENTS.md to plugin root with master goal and Phase 0 ground rules.
2. Identified canonical write entry points for books/authors/pivot tables (single-add and confirm flows).
3. Added a canonical write guard: single-add uses source='candidate' (no inserts), confirm flow uses source='confirmed' (allowed).

December 31st, 2025, 15:03 UTC
1. Added prs_create_book_candidate to create suggestion-only candidates and optionally enqueue them.
2. Normalized candidate ingestion and stored original input + external metadata + raw payloads in queue rows.
3. Refactored single-add flow to use candidate creation + immediate confirmation, and added a pre-check to link existing canonical books before queuing.

December 31st, 2025, 15:27 UTC
1. Centralized canonical promotion via prs_promote_candidate_to_canonical and routed confirm flow through it.
2. Added canonical re-checks in promotion and ensured author/pivot sync happens only at promotion time.
3. Made promotion idempotent by reusing existing book/user-book records when present.

December 31st, 2025, 15:38 UTC
1. Deprecated canonical author columns for new writes (legacy fields left blank).
2. Shifted canonical lookups to prefer slug and use title_author_hash as a safety net only.

December 31st, 2025, 20:43 UTC
1. Phase 6 diagnostics executed via temporary admin-only hook.
2. Canonical integrity and collision checks completed; hash removal gate evaluated.
3. Hash is currently required. (Update with exact counts in this entry.)

December 31st, 2025, 21:31 UTC
1. Phase 7.1: Removed title_author_hash from canonical books schema definitions (new installs/upgrades wonâ€™t create/expect it).
2. Phase 7.2: Added versioned migration (DB version bump) to drop title_author_hash column/index safely and idempotently.
3. Phase 7.3: Removed remaining code paths relying on title_author_hash and deleted temporary Phase 6 admin hook.

December 31st, 2025, 22:41 UTC
1. Phase 8.1: Removed legacy author column reads/writes and routed author display, cover search, and confirm matching through canonical author pivots.
2. Phase 8.2: Updated wp_politeia_books schema definitions to drop author and normalized_author from new installs.
3. Phase 8.3: Added versioned migration (DB version 1.8.0) to drop legacy author columns safely and idempotently.

December 31st, 2025, 23:38 UTC
1. Phase 9.1: Defined title-only slug rule (+year on collision), added alias slug table support, and wired redirects to canonical slugs.
2. Phase 9.2: Added non-destructive slug migration to backfill new slugs and store legacy slugs as aliases (DB version 1.9.0).
3. Phase 9.3-9.5: Enforced predictable slug uniqueness, removed author-based slug logic, and unified slug generation across confirm and single-add flows.

------

TO DO:

December 31st
1. Add detailed session entries as new development tasks are completed.
2. Add a user-facing button to export personal book records to a standardized CSV download.

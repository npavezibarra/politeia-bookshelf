Sessions:

December 31st, 11:43 UTC
1. Created SESSION_LOG to begin tracking plugin work sessions.
2. Documented initial log structure for future updates.

December 31st, 2025, 14:09 UTC
1. Added AGENTS.md to plugin root with master goal and Phase 0 ground rules.
2. Identified canonical write entry points for books/authors/pivot tables (single-add and confirm flows).
3. Added a canonical write guard: single-add uses source='candidate' (no inserts), confirm flow uses source='confirmed' (allowed).

December 31st, 2025, 15:03 UTC
1. Added prs_create_book_candidate to create suggestion-only candidates and optionally enqueue them.
2. Normalized candidate ingestion and stored original input + external metadata + raw payloads in queue rows.
3. Refactored single-add flow to use candidate creation + immediate confirmation, and added a pre-check to link existing canonical books before queuing.

December 31st, 2025, 15:27 UTC
1. Centralized canonical promotion via prs_promote_candidate_to_canonical and routed confirm flow through it.
2. Added canonical re-checks in promotion and ensured author/pivot sync happens only at promotion time.
3. Made promotion idempotent by reusing existing book/user-book records when present.

December 31st, 2025, 15:38 UTC
1. Deprecated canonical author columns for new writes (legacy fields left blank).
2. Shifted canonical lookups to prefer slug and use title_author_hash as a safety net only.

December 31st, 2025, 20:43 UTC
1. Phase 6 diagnostics executed via temporary admin-only hook.
2. Canonical integrity and collision checks completed; hash removal gate evaluated.
3. Hash is currently required. (Update with exact counts in this entry.)

December 31st, 2025, 21:31 UTC
1. Phase 7.1: Removed title_author_hash from canonical books schema definitions (new installs/upgrades won’t create/expect it).
2. Phase 7.2: Added versioned migration (DB version bump) to drop title_author_hash column/index safely and idempotently.
3. Phase 7.3: Removed remaining code paths relying on title_author_hash and deleted temporary Phase 6 admin hook.

December 31st, 2025, 22:41 UTC
1. Phase 8.1: Removed legacy author column reads/writes and routed author display, cover search, and confirm matching through canonical author pivots.
2. Phase 8.2: Updated wp_politeia_books schema definitions to drop author and normalized_author from new installs.
3. Phase 8.3: Added versioned migration (DB version 1.8.0) to drop legacy author columns safely and idempotently.

December 31st, 2025, 23:38 UTC
1. Phase 9.1: Defined title-only slug rule (+year on collision), added alias slug table support, and wired redirects to canonical slugs.
2. Phase 9.2: Added non-destructive slug migration to backfill new slugs and store legacy slugs as aliases (DB version 1.9.0).
3. Phase 9.3-9.5: Enforced predictable slug uniqueness, removed author-based slug logic, and unified slug generation across confirm and single-add flows.

January 1st, 2026, 11:24 UTC
1. Fixed normalized_title normalization to use canonical lowercasing + cleanup in new inserts/updates.
2. Unified normalization helpers across candidate queue, inline confirm updates, and canonical insert paths.
3. Routed book-detection normalization through the shared canonical normalizer for consistent identity comparisons.

January 1st, 2026, 12:13 UTC
1. Added canonical title autocomplete endpoint using normalized_title and localized its nonce/URL to the add-book script.
2. Updated add-book autocomplete to query canonical matches first and fall back to external providers only when empty.
3. Labeled canonical suggestions distinctly while preserving existing dropdown behavior.

January 1st, 2026, 12:37 UTC
1. Expanded title autocomplete to include canonical + Google Books + Open Library results (one per source when available).
2. Returned canonical authors via pivot lookup to support consistent dropdown metadata.
3. Restyled dropdown items to show title + source label with separate author/year lines.

January 1st, 2026, 13:14 UTC
1. Hid author input and hint when authors are set, exposing an Edit button to reveal and prefill the input.
2. Adjusted author Edit button styling and behavior for safer author edits.
3. Removed source labels from autocomplete titles while preserving source order logic.

January 1st, 2026, 18:25 UTC
1. Added ISBN field to the add-book form, wired it through candidate creation, and enabled autofill from external sources.
2. Extended autocomplete to pull ISBN and pages from Google Books/Open Library and display as chips on selection.
3. Added fallback detail fetches to enrich ISBN/pages when initial search results are missing fields.

January 1st, 2026, 18:42 UTC
1. Added cover autofill from Google Books/Open Library to the add-book preview image.
2. Adjusted cover preview sizing to keep width fixed and allow height to adapt to remote covers.

January 1st, 2026, 20:56 UTC
1. Added canonical ISBN storage to wp_politeia_books with installer + migration updates.
2. Wired ISBN persistence through confirm and add-book flows with normalization safeguards.
3. Guarded ISBN writes in the ChatGPT DB handler when the column is present.

January 1st, 2026, 21:08 UTC
1. Attempted multiple fixes to ISBN-based autocomplete selection; ISBN suggestions still do not populate Title/Author/Year/Pages/Cover fields.
2. Deferred final resolution and documented follow-up needed.

January 1st, 2026, 21:22 UTC
1. Fixed ISBN suggestion selection reliability (mousedown + keyboard selection) so ISBN-driven picks now populate Title/Author/Year/Pages/Cover.
2. Confirmed ISBN and Title inputs both populate the rest of the form while keeping Title editable.
3. Removed temporary ISBN debug output after validation.

January 1st, 2026, 22:08 UTC
1. Added duplicate detection to block re-adding books already in a user’s library (server-side guard + client-side check).
2. Introduced canonical identity matching (normalized title + author hashes + optional year, with ISBN override) to detect duplicates even when not selecting canonical suggestions.
3. Displayed an inline “Already in your library” warning under Title and disabled submit when triggered.

January 3, 2026, 14:31 UTC
1. Documented the Reading Session Notes flow in a new report.
2. Added per-session Add Note/Read Note buttons in the reading sessions table and wired label updates after saving.
3. Adjusted table note behavior to open note-only mode (hide recorder header/flash styling) and added spacing for the page range.

January 3, 2026, 23:22 UTC
1. Built the ver-2 single-book template layout and wired core functionality (ratings, statuses, sessions, cover actions) to the new structure.
2. Added template selection support with a new Templates admin tab and wired routing to selected templates.
3. Split Book Stats and Notes Feed into dedicated ver-2 partials and added tab switching with scoped styles.

January 4, 2026, 01:01 UTC
1. Refined the ver-2 template layout: sidebar split into two cards, updated tabs styling, and reordered Book Details with new Published Date row and dividers.
2. Adjusted session UI/controls: moved recorder icon into the title, swapped play icon to Material Symbols, and updated button/icon styling.
3. Tweaked reading sessions table and cover block styling, plus moved Other Readers into Notes Feed.

January 4, 2026, 10:32 UTC
1. Replaced Book Stats markup with the dashboard design, then removed full-document HTML/Tailwind to avoid global font/nav overrides.
2. Scoped Book Stats styles to the section and adjusted card styling, KPI spacing, and responsive padding to match the updated design.
3. Kept dummy weekly/monthly data hooks and comments in place for future database integration.

January 4, 2026, 11:15 UTC
1. Wired Book Stats KPIs to real session data: average session duration and pages-per-hour calculations.
2. Rendered weekly and monthly charts from session page deltas, scaled bars relative to max values, and added date ranges/last-day labels.
3. Removed dummy JS bar generation and updated hover tooltip styling to plain black text.

January 4, 2026, 15:15 UTC
1. Split header and tabs into separate content cards and removed shared background on the content wrapper.
2. Rebuilt Notes Feed layout/styles to the new simplified design, including sidebar tweaks and spacing updates.
3. Wired Notes Feed to real session notes with an empty-state message for books without notes.

January 5, 2026, 15:01 UTC
1. Added emotions JSON column to session notes via schema update and migration, then wired rating UI + AJAX save handler.
2. Rendered Notes Feed entries from live notes, added session/page header, and embedded emotional composition bars per note.
3. Synced ver-2 progress bar with density gaps and gold color scale; updated tab styles and stats totals.

January 5, 2026, 16:06 UTC
1. Created Reading Planner module scaffolding with activation + upgrade hooks and DB versioning.
2. Added dbDelta schemas for plans, plan goals, plan subjects, plan participants, and planned sessions tables.
3. Persisted Reading Plan schema version after install and fixed module loading.

January 5, 2026, 16:40 UTC
1. Added user baseline schemas with dbDelta execution and versioning scaffolding.
2. Implemented baseline helpers for creation, fetching latest baseline, and baseline-aware comparisons.
3. Added baseline metric computation helpers for current reading behavior.

January 8, 2026, 15:03 UTC
1. Adjusted filter slider padding in the filter modal.
2. Removed the "My Library" header label from the library page.
3. Updated the book count to show total books by default and filtered/total when filters or search are active.

January 8, 2026, 16:10 UTC
1. Tuned ver-2 single book responsive layout (sidebar/content width fixes and 980px breakpoint adjustments).
2. Moved the book identity block next to the cover on small screens via a responsive slot + JS reparenting.
3. Adjusted small-screen cover sizing to reduce cropping and added a max-950px height override for the cover frame.

January 8, 2026, 20:04 UTC
1. Rebuilt My Books pagination into a fixed bottom sheet with numeric links and right-aligned sizing.
2. Tweaked My Books header + search + filter controls for 767px and below, including icon-only filter button and button sizing.
3. Updated My Books table spacing and small-screen layout (progress bar width, remove button placement, select sizing, header add-book offset).

January 9, 2026, 19:31 UTC
1. Refined ver-2 Book Stats cards with responsive two-column layout at <= 767px and mobile spacing/typography tweaks.
2. Notes Feed: added Edit/Save toggle with AJAX save, fixed nonce usage, made session numbering earliest-first, and wired Other Readers avatars to member profiles.
3. Reading Sessions: earliest-first numbering in the table and added a 690px mobile card layout with centered times and condensed styling.

January 10, 2026, 01:27 UTC
1. Fixed canonical autocomplete author lookup to use `display_name` so author lines render in dropdown results.
2. Added a canonical marker dot in title suggestions and tightened author/year typography to 10px.
3. Normalized autocomplete suggestion button corners to square on all states.

January 10, 2026, 19:37 UTC
1. Replaced the reading planner overlay markup with the new multi-step form and updated the vanilla JS flow (calendar + list views).
2. Scoped the reading planner CSS to the modal shell, styled the launch button, and adjusted modal sizing to remove the extra panel.
3. Removed Tailwind to prevent global style bleed and replaced required utilities with scoped CSS-only equivalents.

January 12, 2026
1. Rebuilt the reading planner book step with single-book cover preview, remove action, and canonical/autocomplete cover+pages support (including cover lookup from user books).
2. Refined the proposal header, nav controls, and toggle styling to match the original design and adjusted typography/margins per spec.
3. Updated calendar behavior: Monday-first headers, real-time TODAY date, session numbering from 1, hover add/remove session controls, and PPS recalculation on session changes.
4. Simplified flow by skipping past-reading baseline slides, redesigned exigencia slide layout, and added multiple CSS tweaks for buttons, headings, and modal controls.

------

TO DO:

December 31st
1. Add detailed session entries as new development tasks are completed.
2. Add a user-facing button to export personal book records to a standardized CSV download.
3. Build a Public Notes Feed to share user-approved notes with the community (design: https://chatgpt.com/c/695a51e0-07e8-8331-adde-1210b29dc91c).
4. Enhance Add Book autocomplete suggestion input field (see Reports/add-book-autocomplete-suggestions.md).
5. Develop mechanism to add books we've been borrowed from either a person or a Public Library.
